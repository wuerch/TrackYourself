(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{3343:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var u=r(n(4938)),i=n(5893),s=(0,u.default)((0,i.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear");t.Z=s},4938:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.createSvgIcon}});var r=n(5009)},5009:function(e,t,n){"use strict";let r;n.r(t),n.d(t,{capitalize:function(){return i.Z},createChainedFunction:function(){return s},createSvgIcon:function(){return a.Z},debounce:function(){return o},deprecatedPropType:function(){return c},isMuiElement:function(){return f},ownerDocument:function(){return p},ownerWindow:function(){return m},requirePropFactory:function(){return w},setRef:function(){return x},unstable_ClassNameGenerator:function(){return M},unstable_useEnhancedEffect:function(){return y},unstable_useId:function(){return E},unsupportedProp:function(){return _},useControlled:function(){return N},useEventCallback:function(){return C},useForkRef:function(){return T},useIsFocusVisible:function(){return L}});var u=n(7078),i=n(8216),s=function(...e){return e.reduce((e,t)=>null==t?e:function(...n){e.apply(this,n),t.apply(this,n)},()=>{})},a=n(6288),o=function(e,t=166){let n;function r(...r){let u=()=>{e.apply(this,r)};clearTimeout(n),n=setTimeout(u,t)}return r.clear=()=>{clearTimeout(n)},r},c=function(e,t){return()=>null},l=n(7294),d=n.t(l,2),f=function(e,t){return l.isValidElement(e)&&-1!==t.indexOf(e.type.muiName)};function h(e){return e&&e.ownerDocument||document}var p=h,m=function(e){let t=h(e);return t.defaultView||window};n(7462);var w=function(e,t){return()=>null};function g(e,t){"function"==typeof e?e(t):e&&(e.current=t)}var x=g;let v="undefined"!=typeof window?l.useLayoutEffect:l.useEffect;var y=v;let b=0,j=d.useId;var E=function(e){if(void 0!==j){let t=j();return null!=e?e:t}return function(e){let[t,n]=l.useState(e);return l.useEffect(()=>{null==t&&n(`mui-${b+=1}`)},[t]),e||t}(e)},_=function(e,t,n,r,u){return null},N=function({controlled:e,default:t,name:n,state:r="value"}){let{current:u}=l.useRef(void 0!==e),[i,s]=l.useState(t),a=l.useCallback(e=>{u||s(e)},[]);return[u?e:i,a]},C=function(e){let t=l.useRef(e);return v(()=>{t.current=e}),l.useCallback((...e)=>(0,t.current)(...e),[])},T=function(...e){return l.useMemo(()=>e.every(e=>null==e)?null:t=>{e.forEach(e=>{g(e,t)})},e)};let k=!0,S=!1,O={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function D(e){e.metaKey||e.altKey||e.ctrlKey||(k=!0)}function P(){k=!1}function I(){"hidden"===this.visibilityState&&S&&(k=!0)}var L=function(){let e=l.useCallback(e=>{if(null!=e){var t;(t=e.ownerDocument).addEventListener("keydown",D,!0),t.addEventListener("mousedown",P,!0),t.addEventListener("pointerdown",P,!0),t.addEventListener("touchstart",P,!0),t.addEventListener("visibilitychange",I,!0)}},[]),t=l.useRef(!1);return{isFocusVisibleRef:t,onFocus:function(e){return!!function(e){let{target:t}=e;try{return t.matches(":focus-visible")}catch(n){}return k||function(e){let{type:t,tagName:n}=e;return"INPUT"===n&&!!O[t]&&!e.readOnly||"TEXTAREA"===n&&!e.readOnly||!!e.isContentEditable}(t)}(e)&&(t.current=!0,!0)},onBlur:function(){return!!t.current&&(S=!0,window.clearTimeout(r),r=window.setTimeout(()=>{S=!1},100),t.current=!1,!0)},ref:e}};let M={configure:e=>{u.Z.configure(e)}}},27:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/weights",function(){return n(5124)}])},593:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=n(2648).Z,u=n(7294),i=r(n(9351)),s=n(1163);async function a(){let{userContext:e,setUserContext:t}=(0,u.useContext)(i.default),n=(0,s.useRouter)();(0,u.useEffect)(()=>{e||fetch("/api/user",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{200==e.status?t(e.user):n.push("/")})},[])}e.exports={handleContext:a}},5124:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var r=n(5893),u=n(7294),i=n(3343),s=n(9351),a=function(){let{userContext:e,setUserContext:t}=(0,u.useContext)(s.default);async function n(n){let{weight:r}=n;await fetch("/api/weights",{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:r._id,date:r.date})}).then(e=>e.json()).then(n=>{if(200===n.status){let u=e.weights.filter(e=>e.date!=r.date);t(e=>({...e,weights:u}))}}).catch(e=>console.error("Error:",e))}return(0,r.jsxs)("div",{children:[e&&e.weights.length>0?(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex justify-around",children:[(0,r.jsx)("p",{className:"basis-0 grow",children:"Date"}),(0,r.jsx)("p",{className:"basis-0 grow",children:"Weight"}),(0,r.jsx)("p",{className:"basis-0 grow",children:"Delete"})]}),(0,r.jsx)("hr",{})]}):"",e&&e.weights.length>0?e.weights.map((e,t)=>(0,r.jsxs)("div",{index:e._id,className:"flex justify-around",children:[(0,r.jsx)("p",{className:"basis-0 grow",children:null===e.date?"":e.date.slice(8,10)+"."+e.date.slice(5,7)}),(0,r.jsxs)("p",{className:"basis-0 grow",children:[e.weight," kg"]}),(0,r.jsx)("div",{className:"basis-0 grow",children:(0,r.jsx)("button",{className:"bg-[#BA1000] hover:cursor-pointer",onClick:t=>n({weight:e}),children:(0,r.jsx)(i.Z,{})})})]},t)).reverse():""]})},o=function(e){let{userContext:t,setUserContext:n}=(0,u.useContext)(s.default),[i,a]=(0,u.useState)(new Date().toISOString().substring(0,10)),[o,c]=(0,u.useState)("");function l(e){var t=e.target.name;"date"===t?a(e.target.value):"weight"===t&&c(e.target.value.replace(/[^0-9.,]/mg,""))}async function d(e){e.preventDefault(),await fetch("/api/weights",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({date:i,weight:o})}).then(e=>e.json()).then(e=>{200===e.status?(n(e=>({...e,weights:[...e.weights,{date:i,weight:o}]})),a(()=>new Date().toISOString().slice(0,10)),c("")):400===e.status&&(alert("Date already exists."),c(""))}).catch(e=>console.error("Error:",e))}return(0,r.jsx)("div",{children:(0,r.jsxs)("form",{className:"text-black flex flex-col md:flex-row w-[80%] mx-[10%]",action:"/api/weights",method:"POST",children:[(0,r.jsx)("input",{onChange:l,className:"mt-2 rounded h-8 w-full",type:"date",name:"date",placeholder:"Date",value:i}),(0,r.jsx)("input",{onChange:l,className:"mt-2 rounded h-8 w-full",type:"text",name:"weight",placeholder:"Weight in kg",value:o}),(0,r.jsx)("button",{onClick:d,className:"border-[1px] rounded mt-2 h-8 w-full bg-[#369623] mb-2",children:(0,r.jsx)("p",{className:"text-white",children:"Add"})})]})})},c=n(593),l=function(){return(0,c.handleContext)(),(0,r.jsxs)("div",{className:"min-h-screen",children:[(0,r.jsx)(o,{}),(0,r.jsx)(a,{})]})}},4836:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports}},function(e){e.O(0,[774,888,179],function(){return e(e.s=27)}),_N_E=e.O()}]);