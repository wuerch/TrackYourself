(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[329],{3343:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var i=r(n(4938)),a=n(5893),u=(0,i.default)((0,a.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear");t.Z=u},4938:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.createSvgIcon}});var r=n(5009)},5009:function(e,t,n){"use strict";let r;n.r(t),n.d(t,{capitalize:function(){return a.Z},createChainedFunction:function(){return u},createSvgIcon:function(){return l.Z},debounce:function(){return o},deprecatedPropType:function(){return s},isMuiElement:function(){return f},ownerDocument:function(){return m},ownerWindow:function(){return p},requirePropFactory:function(){return w},setRef:function(){return v},unstable_ClassNameGenerator:function(){return M},unstable_useEnhancedEffect:function(){return b},unstable_useId:function(){return y},unsupportedProp:function(){return N},useControlled:function(){return z},useEventCallback:function(){return E},useForkRef:function(){return _},useIsFocusVisible:function(){return D}});var i=n(7078),a=n(8216),u=function(...e){return e.reduce((e,t)=>null==t?e:function(...n){e.apply(this,n),t.apply(this,n)},()=>{})},l=n(6288),o=function(e,t=166){let n;function r(...r){let i=()=>{e.apply(this,r)};clearTimeout(n),n=setTimeout(i,t)}return r.clear=()=>{clearTimeout(n)},r},s=function(e,t){return()=>null},c=n(7294),d=n.t(c,2),f=function(e,t){return c.isValidElement(e)&&-1!==t.indexOf(e.type.muiName)};function h(e){return e&&e.ownerDocument||document}var m=h,p=function(e){let t=h(e);return t.defaultView||window};n(7462);var w=function(e,t){return()=>null};function x(e,t){"function"==typeof e?e(t):e&&(e.current=t)}var v=x;let g="undefined"!=typeof window?c.useLayoutEffect:c.useEffect;var b=g;let j=0,k=d.useId;var y=function(e){if(void 0!==k){let t=k();return null!=e?e:t}return function(e){let[t,n]=c.useState(e);return c.useEffect(()=>{null==t&&n(`mui-${j+=1}`)},[t]),e||t}(e)},N=function(e,t,n,r,i){return null},z=function({controlled:e,default:t,name:n,state:r="value"}){let{current:i}=c.useRef(void 0!==e),[a,u]=c.useState(t),l=c.useCallback(e=>{i||u(e)},[]);return[i?e:a,l]},E=function(e){let t=c.useRef(e);return g(()=>{t.current=e}),c.useCallback((...e)=>(0,t.current)(...e),[])},_=function(...e){return c.useMemo(()=>e.every(e=>null==e)?null:t=>{e.forEach(e=>{x(e,t)})},e)};let C=!0,T=!1,O={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function S(e){e.metaKey||e.altKey||e.ctrlKey||(C=!0)}function P(){C=!1}function Z(){"hidden"===this.visibilityState&&T&&(C=!0)}var D=function(){let e=c.useCallback(e=>{if(null!=e){var t;(t=e.ownerDocument).addEventListener("keydown",S,!0),t.addEventListener("mousedown",P,!0),t.addEventListener("pointerdown",P,!0),t.addEventListener("touchstart",P,!0),t.addEventListener("visibilitychange",Z,!0)}},[]),t=c.useRef(!1);return{isFocusVisibleRef:t,onFocus:function(e){return!!function(e){let{target:t}=e;try{return t.matches(":focus-visible")}catch(n){}return C||function(e){let{type:t,tagName:n}=e;return"INPUT"===n&&!!O[t]&&!e.readOnly||"TEXTAREA"===n&&!e.readOnly||!!e.isContentEditable}(t)}(e)&&(t.current=!0,!0)},onBlur:function(){return!!t.current&&(T=!0,window.clearTimeout(r),r=window.setTimeout(()=>{T=!1},100),t.current=!1,!0)},ref:e}};let M={configure:e=>{i.Z.configure(e)}}},9830:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/kalorien",function(){return n(9142)}])},593:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=n(2648).Z,i=n(7294),a=r(n(9351)),u=n(1163);async function l(){let{userContext:e,setUserContext:t}=(0,i.useContext)(a.default),n=(0,u.useRouter)();(0,i.useEffect)(()=>{e||fetch("/api/user",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{200==e.status?t(e.user):n.push("/")})},[])}e.exports={handleContext:l}},9142:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var r=n(5893),i=n(7294),a=n(9351),u=function(e){let{userContext:t,setUserContext:n}=(0,i.useContext)(a.default),[u,l]=(0,i.useState)(new Date().toISOString().substring(0,10)),[o,s]=(0,i.useState)({mahlzeit:"",gewicht:"",kalorien:""});function c(e){let{name:t,value:n}=e.target;var r=e.target.name;"date"===r?l(n):"mahlzeit"===r?s(e=>({...e,[t]:n.replace(/[^a-zA-zäöüÄÖÜß 1-9]/,"")})):"gewicht"===r?s(e=>({...e,[t]:n.replace(/[^0-9]/,"")})):"kalorien"===r&&s(e=>({...e,[t]:n.replace(/[^0-9]/,"")}))}async function d(e){e.preventDefault(),await fetch(t.base_url+"/api/mahlzeit",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({date:u+"T00:00:00.000Z",mahlzeit:{mahlzeit:o.mahlzeit,gewicht:Number(o.gewicht),kalorien:Number(o.kalorien)}})}).then(e=>e.json()).then(e=>{200===e.status&&(n(e=>({...e,kalorien:function(e){if(!e.find(e=>e.date===u+"T00:00:00.000Z"))return console.log("No date found, created a new one."),[...e,{date:u+"T00:00:00.000Z",mahlzeiten:[{mahlzeit:o.mahlzeit,gewicht:Number(o.gewicht),kalorien:Number(o.kalorien)}]}];{console.log("Date found, added to the object.");let t=e.map(e=>e.date===u+"T00:00:00.000Z"?{...e,mahlzeiten:[...e.mahlzeiten,o]}:e);return t}}(t.kalorien)})),s({mahlzeit:"",gewicht:"",kalorien:""}))}).catch()}return(0,r.jsx)("div",{children:(0,r.jsxs)("form",{className:"text-black flex flex-col md:flex-row w-[80%] mx-[10%]",action:"/api/workouts",method:"POST",children:[(0,r.jsx)("input",{onChange:c,className:"mt-2 rounded h-8 w-[100%]",type:"date",name:"date",placeholder:"Date",value:u}),(0,r.jsx)("input",{onChange:c,className:"mt-2 rounded h-8 w-full",name:"mahlzeit",placeholder:"Meal",value:o.mahlzeit}),(0,r.jsx)("input",{onChange:c,className:"mt-2 rounded h-8 w-full",name:"gewicht",placeholder:"Gramm",value:o.gewicht}),(0,r.jsx)("input",{onChange:c,className:"mt-2 rounded h-8 w-full",name:"kalorien",placeholder:"Calories",value:o.kalorien}),(0,r.jsx)("button",{onClick:d,className:"border-[1px] rounded mt-2 h-8 w-full bg-[#369623]",children:(0,r.jsx)("p",{className:"text-white",children:"Add"})})]})})},l=n(3343),o=function(){let{userContext:e,setUserContext:t}=(0,i.useContext)(a.default);async function n(n,r){let{mahlzeit:i}=n;await fetch(e.base_url+"/api/mahlzeit",{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({mahlzeit:i,date:r})}).then(e=>e.json()).then(n=>{if(200===n.status){let a=function(e,t,n){let r=e.map(e=>{if(e.date!==n)return e;{let r=e.mahlzeiten.filter(e=>e.mahlzeit!==t.mahlzeit|e.gewicht!==t.gewicht|e.kalorien!==t.kalorien);return{date:e.date,_id:e._id,mahlzeiten:r}}});return r}(e.kalorien,i,r);t(e=>({...e,kalorien:a}))}}).catch(e=>console.error("Error:",e))}return(0,r.jsx)("div",{className:"text-red flex flex-col mt-2",children:e&&e.kalorien&&e.kalorien.length>0?e.kalorien.map((e,t)=>(0,r.jsxs)("div",{children:[e.mahlzeiten&&e.mahlzeiten.length>0?(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"gradient",children:e.date.slice(0,10)}),(0,r.jsxs)("div",{className:"flex justify-around",children:[(0,r.jsx)("p",{className:"basis-0 grow",children:"Meal"}),(0,r.jsx)("p",{className:"basis-0 grow",children:"Gramm"}),(0,r.jsx)("p",{className:"basis-0 grow",children:"Calories"}),(0,r.jsx)("p",{className:"basis-0 grow-[0.5]",children:"Delete"})]}),(0,r.jsx)("hr",{})]}):"",e.mahlzeiten.map((t,i)=>(0,r.jsxs)("div",{className:"flex justify-around",children:[(0,r.jsx)("p",{className:"basis-0 grow",children:t.mahlzeit}),(0,r.jsxs)("p",{className:"basis-0 grow",children:[t.gewicht," g"]}),(0,r.jsxs)("p",{className:"basis-0 grow",children:[t.kalorien," kcal"]}),(0,r.jsx)("div",{className:"basis-0 grow-[0.5] flex justify-center",children:(0,r.jsx)("div",{className:"w-min h-min bg-[#BA1000] hover:cursor-pointer",onClick:()=>n({mahlzeit:t},e.date),children:(0,r.jsx)(l.Z,{})})})]},i))]},t)):""})},s=n(593),c=function(){return(0,s.handleContext)(),(0,r.jsxs)("div",{className:"min-h-screen",children:[(0,r.jsx)(u,{}),(0,r.jsx)(o,{})]})}},4836:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports}},function(e){e.O(0,[774,888,179],function(){return e(e.s=9830)}),_N_E=e.O()}]);