(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[759],{3343:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var s=r(n(4938)),u=n(5893),i=(0,s.default)((0,u.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear");t.Z=i},4938:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.createSvgIcon}});var r=n(5009)},5009:function(e,t,n){"use strict";let r;n.r(t),n.d(t,{capitalize:function(){return u.Z},createChainedFunction:function(){return i},createSvgIcon:function(){return o.Z},debounce:function(){return a},deprecatedPropType:function(){return c},isMuiElement:function(){return f},ownerDocument:function(){return h},ownerWindow:function(){return x},requirePropFactory:function(){return m},setRef:function(){return v},unstable_ClassNameGenerator:function(){return I},unstable_useEnhancedEffect:function(){return g},unstable_useId:function(){return N},unsupportedProp:function(){return E},useControlled:function(){return _},useEventCallback:function(){return k},useForkRef:function(){return C},useIsFocusVisible:function(){return R}});var s=n(7078),u=n(8216),i=function(...e){return e.reduce((e,t)=>null==t?e:function(...n){e.apply(this,n),t.apply(this,n)},()=>{})},o=n(6288),a=function(e,t=166){let n;function r(...r){let s=()=>{e.apply(this,r)};clearTimeout(n),n=setTimeout(s,t)}return r.clear=()=>{clearTimeout(n)},r},c=function(e,t){return()=>null},l=n(7294),d=n.t(l,2),f=function(e,t){return l.isValidElement(e)&&-1!==t.indexOf(e.type.muiName)};function p(e){return e&&e.ownerDocument||document}var h=p,x=function(e){let t=p(e);return t.defaultView||window};n(7462);var m=function(e,t){return()=>null};function w(e,t){"function"==typeof e?e(t):e&&(e.current=t)}var v=w;let j="undefined"!=typeof window?l.useLayoutEffect:l.useEffect;var g=j;let b=0,y=d.useId;var N=function(e){if(void 0!==y){let t=y();return null!=e?e:t}return function(e){let[t,n]=l.useState(e);return l.useEffect(()=>{null==t&&n(`mui-${b+=1}`)},[t]),e||t}(e)},E=function(e,t,n,r,s){return null},_=function({controlled:e,default:t,name:n,state:r="value"}){let{current:s}=l.useRef(void 0!==e),[u,i]=l.useState(t),o=l.useCallback(e=>{s||i(e)},[]);return[s?e:u,o]},k=function(e){let t=l.useRef(e);return j(()=>{t.current=e}),l.useCallback((...e)=>(0,t.current)(...e),[])},C=function(...e){return l.useMemo(()=>e.every(e=>null==e)?null:t=>{e.forEach(e=>{w(e,t)})},e)};let T=!0,S=!1,O={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function D(e){e.metaKey||e.altKey||e.ctrlKey||(T=!0)}function P(){T=!1}function Z(){"hidden"===this.visibilityState&&S&&(T=!0)}var R=function(){let e=l.useCallback(e=>{if(null!=e){var t;(t=e.ownerDocument).addEventListener("keydown",D,!0),t.addEventListener("mousedown",P,!0),t.addEventListener("pointerdown",P,!0),t.addEventListener("touchstart",P,!0),t.addEventListener("visibilitychange",Z,!0)}},[]),t=l.useRef(!1);return{isFocusVisibleRef:t,onFocus:function(e){return!!function(e){let{target:t}=e;try{return t.matches(":focus-visible")}catch(n){}return T||function(e){let{type:t,tagName:n}=e;return"INPUT"===n&&!!O[t]&&!e.readOnly||"TEXTAREA"===n&&!e.readOnly||!!e.isContentEditable}(t)}(e)&&(t.current=!0,!0)},onBlur:function(){return!!t.current&&(S=!0,window.clearTimeout(r),r=window.setTimeout(()=>{S=!1},100),t.current=!1,!0)},ref:e}};let I={configure:e=>{s.Z.configure(e)}}},8474:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/exercises",function(){return n(6338)}])},593:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=n(2648).Z,s=n(7294),u=r(n(9351)),i=n(1163);async function o(){let{userContext:e,setUserContext:t}=(0,s.useContext)(u.default),n=(0,i.useRouter)();(0,s.useEffect)(()=>{e||fetch("/api/user",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{200==e.status?t(e.user):n.push("/")})},[])}e.exports={handleContext:o}},6338:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var r=n(5893),s=n(7294),u=n(9351),i=function(e){let{userContext:t,setUserContext:n}=(0,s.useContext)(u.default),[i,o]=(0,s.useState)(new Date().toISOString().substring(0,10)),[a,c]=(0,s.useState)({exercise:"",sets:"",reps:"",weight:"",duration:""});function l(e){let{name:t,value:n}=e.target;var r=e.target.name;"date"===r?o(n):"exercise"===r?c(e=>({...e,[t]:n.replace(/[^a-zA-zäöüÄÖÜß]/,"")})):"sets"===r?c(e=>({...e,[t]:n.replace(/[^0-9]/,"")})):"reps"===r?c(e=>({...e,[t]:n.replace(/[^0-9]/,"")})):"weight"===r?c(e=>({...e,[t]:n.replace(/[^0-9,.]/,"")})):"duration"===r&&c(e=>({...e,[t]:n.replace(/[^0-9,.]/,"")}))}async function d(e){e.preventDefault(),await fetch(t.base_url+"/api/workouts",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({date:i+"T00:00:00.000Z",exercises:{exercise:a.exercise,sets:a.sets,reps:a.reps,weight:a.weight,duration:a.duration}})}).then(e=>e.json()).then(e=>{200==e.status?(n(e=>({...e,workouts:function(e){if(!e.find(e=>e.date===i+"T00:00:00.000Z"))return console.log("No date found, created a new one."),[...e,{date:i+"T00:00:00.000Z",exercises:[a]}];{console.log("Date found, added to the object.");let t=e.map(e=>e.date===i+"T00:00:00.000Z"?{...e,exercises:[...e.exercises,a]}:e);return t}}(t.workouts)})),c({exercise:"",sets:"",reps:"",weight:"",duration:""})):console.log("AddWorkout Else")}).catch()}return(0,r.jsx)("div",{children:(0,r.jsxs)("form",{className:"text-black flex flex-col md:flex-row w-[80%] mx-[10%]",action:"/api/workouts",method:"POST",children:[(0,r.jsx)("input",{onChange:l,className:"mt-2 rounded h-8 w-full",type:"date",name:"date",placeholder:"Date",value:i}),(0,r.jsx)("input",{onChange:l,className:"mt-2 rounded h-8 w-full",name:"exercise",placeholder:"Exercise",value:a.exercise}),(0,r.jsx)("input",{onChange:l,className:"mt-2 rounded h-8 w-full",name:"sets",placeholder:"Sets",value:a.sets}),(0,r.jsx)("input",{onChange:l,className:"mt-2 rounded h-8 w-full",name:"reps",placeholder:"Reps",value:a.reps}),(0,r.jsx)("input",{onChange:l,className:"mt-2 rounded h-8 w-full",name:"duration",placeholder:"Duration in min",value:a.duration}),(0,r.jsx)("button",{onClick:d,className:"border-[1px] rounded mt-2 h-8 w-full bg-[#369623] mb-2",children:(0,r.jsx)("p",{className:"text-white",children:"Add"})})]})})},o=n(3343),a=function(e){let{userContext:t,setUserContext:n}=(0,s.useContext)(u.default);async function i(e,r){let{exercise:s}=e;await fetch("/api/workouts",{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({exercise:s,date:r})}).then(e=>e.json()).then(e=>{200===e.status&&n(e=>({...e,workouts:function(e,t,n){let r=e.map(e=>{if(e.date!==n)return e;{let r=e.exercises.filter(e=>e.exercise!==t.exercise|e.sets!==t.sets|e.reps!==t.reps|e.weight!==t.weight|e.duration!==t.duration);return{date:e.date,_id:e._id,exercises:r}}});return r}(t.workouts,s,r)}))}).catch(e=>console.error("Error:",e))}return(0,r.jsx)("div",{children:t&&t.workouts&&t.workouts.length>0?t.workouts.map((e,t)=>(0,r.jsxs)("div",{className:"",children:[e.exercises&&e.exercises.length>0?(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"gradient",children:e.date.slice(0,10)}),(0,r.jsxs)("div",{className:"flex justify-around",children:[(0,r.jsx)("p",{className:"basis-0 grow",children:"Exercise"}),(0,r.jsx)("p",{className:"basis-0 grow whitespace-nowrap",children:"Sets x Reps"}),(0,r.jsx)("p",{className:"basis-0 grow",children:"Duration"}),(0,r.jsx)("div",{className:"basis-0 grow-[0.5]",children:(0,r.jsx)("p",{children:"Delete"})})]}),(0,r.jsx)("hr",{})]}):"",e.exercises&&e.exercises.length>0?e.exercises.map((t,n)=>(0,r.jsxs)("div",{className:"flex justify-around",children:[(0,r.jsx)("p",{className:"basis-0 grow min-w-0",children:t.exercise}),(0,r.jsx)("p",{className:"basis-0 grow",children:t.sets|t.reps?t.sets+(t.reps?" x "+t.reps:""):""}),(0,r.jsx)("p",{className:"basis-0 grow",children:t.duration?t.duration+" min":""}),(0,r.jsx)("div",{className:"basis-0 grow-[0.5] flex justify-center",children:(0,r.jsx)("div",{onClick:()=>i({exercise:t},e.date),className:"bg-[#BA1000] w-min hover:cursor-pointer",children:(0,r.jsx)(o.Z,{})})})]},n)):""]},t)).reverse():""})},c=n(593),l=function(){return(0,c.handleContext)(),(0,r.jsxs)("div",{className:"min-h-screen",children:[(0,r.jsx)(i,{}),(0,r.jsx)(a,{})]})}},4836:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports}},function(e){e.O(0,[774,888,179],function(){return e(e.s=8474)}),_N_E=e.O()}]);