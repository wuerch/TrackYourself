(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{3343:function(e,t,s){"use strict";var n=s(4836);t.Z=void 0;var a=n(s(4938)),i=s(5893),r=(0,a.default)((0,i.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear");t.Z=r},27:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/weights",function(){return s(5124)}])},593:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=s(2648).Z,a=s(7294),i=n(s(9351)),r=s(1163);async function l(){let{userContext:e,setUserContext:t}=(0,a.useContext)(i.default),s=(0,r.useRouter)();(0,a.useEffect)(()=>{e||fetch("/api/user",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{200==e.status?t(e.user):s.push("/")})},[])}e.exports={handleContext:l}},5124:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return o}});var n=s(5893),a=s(7294),i=s(3343),r=s(9351),l=function(){let{userContext:e,setUserContext:t}=(0,a.useContext)(r.default);async function s(s){let{weight:n}=s;await fetch("/api/weights",{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:n._id,date:n.date})}).then(e=>e.json()).then(s=>{if(200===s.status){let a=e.weights.filter(e=>e.date!=n.date);t(e=>({...e,weights:a}))}}).catch(e=>console.error("Error:",e))}return(0,n.jsxs)("div",{children:[e&&e.weights.length>0?(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex justify-around",children:[(0,n.jsx)("p",{className:"basis-0 grow",children:"Date"}),(0,n.jsx)("p",{className:"basis-0 grow",children:"Weight"}),(0,n.jsx)("p",{className:"basis-0 grow",children:"Delete"})]}),(0,n.jsx)("hr",{})]}):"",e&&e.weights.length>0?e.weights.map((e,t)=>(0,n.jsxs)("div",{index:e._id,className:"flex justify-around",children:[(0,n.jsx)("p",{className:"basis-0 grow",children:null===e.date?"":e.date.slice(8,10)+"."+e.date.slice(5,7)}),(0,n.jsxs)("p",{className:"basis-0 grow",children:[e.weight," kg"]}),(0,n.jsx)("div",{className:"basis-0 grow",children:(0,n.jsx)("button",{className:"bg-[#BA1000] hover:cursor-pointer",onClick:t=>s({weight:e}),children:(0,n.jsx)(i.Z,{})})})]},t)).reverse():""]})},c=function(e){let{userContext:t,setUserContext:s}=(0,a.useContext)(r.default),[i,l]=(0,a.useState)(new Date().toISOString().substring(0,10)),[c,d]=(0,a.useState)("");function o(e){var t=e.target.name;"date"===t?l(e.target.value):"weight"===t&&d(e.target.value.replace(/[^0-9.,]/mg,""))}async function u(e){e.preventDefault(),await fetch("/api/weights",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({date:i,weight:c})}).then(e=>e.json()).then(e=>{200===e.status?(s(e=>({...e,weights:[...e.weights,{date:i,weight:c}]})),l(()=>new Date().toISOString().slice(0,10)),d("")):400===e.status&&(alert("Date already exists."),d(""))}).catch(e=>console.error("Error:",e))}return(0,n.jsx)("div",{children:(0,n.jsxs)("form",{className:"text-black flex flex-col md:flex-row w-[80%] mx-[10%]",action:"/api/weights",method:"POST",children:[(0,n.jsx)("input",{onChange:o,className:"mt-2 rounded h-8 w-full",type:"date",name:"date",placeholder:"Date",value:i}),(0,n.jsx)("input",{onChange:o,className:"mt-2 rounded h-8 w-full",type:"text",name:"weight",placeholder:"Weight in kg",value:c}),(0,n.jsx)("button",{onClick:u,className:"border-[1px] rounded mt-2 h-8 w-full bg-[#369623] mb-2",children:(0,n.jsx)("p",{className:"text-white",children:"Add"})})]})})},d=s(593),o=function(){return(0,d.handleContext)(),(0,n.jsxs)("div",{className:"min-h-screen",children:[(0,n.jsx)(c,{}),(0,n.jsx)(l,{})]})}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=27)}),_N_E=e.O()}]);