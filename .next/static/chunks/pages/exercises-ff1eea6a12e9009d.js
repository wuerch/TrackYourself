(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[759],{3343:function(e,s,t){"use strict";var r=t(4836);s.Z=void 0;var n=r(t(4938)),a=t(5893),i=(0,n.default)((0,a.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear");s.Z=i},8474:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/exercises",function(){return t(6338)}])},593:function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0});let r=t(2648).Z,n=t(7294),a=r(t(9351)),i=t(1163);async function o(){let{userContext:e,setUserContext:s}=(0,n.useContext)(a.default),t=(0,i.useRouter)();(0,n.useEffect)(()=>{e||fetch("/api/user",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{200==e.status?s(e.user):t.push("/")})},[])}e.exports={handleContext:o}},6338:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return d}});var r=t(5893),n=t(7294),a=t(9351),i=function(e){let{userContext:s,setUserContext:t}=(0,n.useContext)(a.default),[i,o]=(0,n.useState)(new Date().toISOString().substring(0,10)),[c,l]=(0,n.useState)({exercise:"",sets:"",reps:"",weight:"",duration:""});function d(e){let{name:s,value:t}=e.target;var r=e.target.name;"date"===r?o(t):"exercise"===r?l(e=>({...e,[s]:t.replace(/[^a-zA-zäöüÄÖÜß]/,"")})):"sets"===r?l(e=>({...e,[s]:t.replace(/[^0-9]/,"")})):"reps"===r?l(e=>({...e,[s]:t.replace(/[^0-9]/,"")})):"weight"===r?l(e=>({...e,[s]:t.replace(/[^0-9,.]/,"")})):"duration"===r&&l(e=>({...e,[s]:t.replace(/[^0-9,.]/,"")}))}async function u(e){e.preventDefault(),await fetch(s.base_url+"/api/workouts",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({date:i+"T00:00:00.000Z",exercises:{exercise:c.exercise,sets:c.sets,reps:c.reps,weight:c.weight,duration:c.duration}})}).then(e=>e.json()).then(e=>{200==e.status?(t(e=>({...e,workouts:function(e){if(!e.find(e=>e.date===i+"T00:00:00.000Z"))return console.log("No date found, created a new one."),[...e,{date:i+"T00:00:00.000Z",exercises:[c]}];{console.log("Date found, added to the object.");let s=e.map(e=>e.date===i+"T00:00:00.000Z"?{...e,exercises:[...e.exercises,c]}:e);return s}}(s.workouts)})),l({exercise:"",sets:"",reps:"",weight:"",duration:""})):console.log("AddWorkout Else")}).catch()}return(0,r.jsx)("div",{children:(0,r.jsxs)("form",{className:"text-black flex flex-col md:flex-row w-[80%] mx-[10%]",action:"/api/workouts",method:"POST",children:[(0,r.jsx)("input",{onChange:d,className:"mt-2 rounded h-8 w-full",type:"date",name:"date",placeholder:"Date",value:i}),(0,r.jsx)("input",{onChange:d,className:"mt-2 rounded h-8 w-full",name:"exercise",placeholder:"Exercise",value:c.exercise}),(0,r.jsx)("input",{onChange:d,className:"mt-2 rounded h-8 w-full",name:"sets",placeholder:"Sets",value:c.sets}),(0,r.jsx)("input",{onChange:d,className:"mt-2 rounded h-8 w-full",name:"reps",placeholder:"Reps",value:c.reps}),(0,r.jsx)("input",{onChange:d,className:"mt-2 rounded h-8 w-full",name:"duration",placeholder:"Duration in min",value:c.duration}),(0,r.jsx)("button",{onClick:u,className:"border-[1px] rounded mt-2 h-8 w-full bg-[#369623] mb-2",children:(0,r.jsx)("p",{className:"text-white",children:"Add"})})]})})},o=t(3343),c=function(e){let{userContext:s,setUserContext:t}=(0,n.useContext)(a.default);async function i(e,r){let{exercise:n}=e;await fetch("/api/workouts",{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({exercise:n,date:r})}).then(e=>e.json()).then(e=>{200===e.status&&t(e=>({...e,workouts:function(e,s,t){let r=e.map(e=>{if(e.date!==t)return e;{let r=e.exercises.filter(e=>e.exercise!==s.exercise|e.sets!==s.sets|e.reps!==s.reps|e.weight!==s.weight|e.duration!==s.duration);return{date:e.date,_id:e._id,exercises:r}}});return r}(s.workouts,n,r)}))}).catch(e=>console.error("Error:",e))}return(0,r.jsx)("div",{children:s&&s.workouts&&s.workouts.length>0?s.workouts.map((e,s)=>(0,r.jsxs)("div",{className:"",children:[e.exercises&&e.exercises.length>0?(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"gradient",children:e.date.slice(0,10)}),(0,r.jsxs)("div",{className:"flex justify-around",children:[(0,r.jsx)("p",{className:"basis-0 grow",children:"Exercise"}),(0,r.jsx)("p",{className:"basis-0 grow whitespace-nowrap",children:"Sets x Reps"}),(0,r.jsx)("p",{className:"basis-0 grow",children:"Duration"}),(0,r.jsx)("div",{className:"basis-0 grow-[0.5]",children:(0,r.jsx)("p",{children:"Delete"})})]}),(0,r.jsx)("hr",{})]}):"",e.exercises&&e.exercises.length>0?e.exercises.map((s,t)=>(0,r.jsxs)("div",{className:"flex justify-around",children:[(0,r.jsx)("p",{className:"basis-0 grow min-w-0",children:s.exercise}),(0,r.jsx)("p",{className:"basis-0 grow",children:s.sets|s.reps?s.sets+(s.reps?" x "+s.reps:""):""}),(0,r.jsx)("p",{className:"basis-0 grow",children:s.duration?s.duration+" min":""}),(0,r.jsx)("div",{className:"basis-0 grow-[0.5] flex justify-center",children:(0,r.jsx)("div",{onClick:()=>i({exercise:s},e.date),className:"bg-[#BA1000] w-min hover:cursor-pointer",children:(0,r.jsx)(o.Z,{})})})]},t)):""]},s)).reverse():""})},l=t(593),d=function(){return(0,l.handleContext)(),(0,r.jsxs)("div",{className:"min-h-screen",children:[(0,r.jsx)(i,{}),(0,r.jsx)(c,{})]})}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=8474)}),_N_E=e.O()}]);