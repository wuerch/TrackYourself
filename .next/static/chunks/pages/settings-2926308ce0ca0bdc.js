(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[662],{8076:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/settings",function(){return t(2056)}])},2056:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return d}});var s=t(5893),c=t(7294),l=t(9351),a=function(e){let{data:n,setDataPopup:t}=e;async function c(){t(e=>!e),await fetch("/api/account",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{})}return(0,s.jsx)("div",{className:"fixed h-full w-full inset-0 ] bg-[rgba(0,0,0,0.6)]",children:(0,s.jsx)("div",{className:"flex items-center h-full justify-center",children:(0,s.jsxs)("div",{className:"bg-stone-100 rounded w-3/4 h-1/4 md:w-1/2 flex justify-center items-center flex-col",children:[(0,s.jsx)("p",{className:"text-black",children:n}),(0,s.jsx)("button",{className:"text-black border-[1px] border-black rounded mt-6",children:(0,s.jsx)("p",{className:"px-2 py-1",onClick:()=>c(),children:"Okay"})})]})})})},i=function(e){let{data:n,cbFunction:t}=e,{userContext:a,setUserContext:i}=(0,c.useContext)(l.default);async function r(){await fetch("/api/account",{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{200===e.status&&window.open("/auth/logout","_self")}).catch(e=>console.error("Error:",e))}return(0,s.jsx)("div",{className:"fixed h-full w-full inset-0 ] bg-[rgba(0,0,0,0.6)]",children:(0,s.jsx)("div",{className:"flex items-center h-full justify-center",children:(0,s.jsxs)("div",{className:"bg-stone-100 rounded w-3/4 h-1/4 md:w-1/2 flex justify-center items-center flex-col",children:[(0,s.jsx)("p",{className:"text-black",children:n}),(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("button",{className:"text-black border-[1px] border-black bg-red-600 rounded mt-6 mr-2",children:(0,s.jsx)("p",{className:"px-2 py-1",onClick:()=>r(),children:"L\xf6schen"})}),(0,s.jsx)("button",{className:"text-black border-[1px] border-black rounded mt-6 ml-2",children:(0,s.jsx)("p",{className:"px-2 py-1",onClick:()=>t(),children:"Behalten"})})]})]})})})},r=t(1163),d=function(){let e=(0,r.useRouter)(),[n,t]=(0,c.useState)(!1),[d,o]=(0,c.useState)(!1),[u,h]=(0,c.useState)(!0),{userContext:x,setUserContext:f}=(0,c.useContext)(l.default);async function p(){await fetch("/api/account/sendEmail",{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({checkbox:u})}).then(e=>e.json()).then(e=>{200===e.status&&h(e=>!e)}).catch(e=>{console.error("Error:",e)})}return(0,c.useEffect)(()=>{x?h(x.sendDailyEmail):fetch("/api/user",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(n=>{200==n.status?(f(n.user),h(n.user.sendDailyEmail)):e.push("/")})},[]),(0,s.jsxs)("div",{className:"min-h-screen",children:[!0===d?(0,s.jsx)(a,{data:"Wir senden dir deine Daten",setDataPopup:o,cbFunction:()=>o(e=>!e)}):"",!0===n?(0,s.jsx)(i,{data:"Willst du deinen Account wirklich l\xf6schen?",cbFunction:()=>t(e=>!e)}):"",(0,s.jsxs)("div",{className:"flex justify-center",children:[(0,s.jsx)("input",{type:"checkbox",className:"w-4 mr-2",onChange:p,value:u,checked:u}),(0,s.jsx)("p",{children:"Ich will Emails bekommen"})]}),(0,s.jsx)("button",{className:"border-[1px] rounded p-2",onClick:()=>{o(e=>!e)},children:"Ich will meine gespeicherten Daten"}),(0,s.jsx)("div",{children:(0,s.jsx)("button",{className:"bg-red-700 border-[1px] rounded p-2",onClick:()=>t(e=>!e),children:"Account l\xf6schen"})})]})}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=8076)}),_N_E=e.O()}]);