(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[759],{8474:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/exercises",function(){return t(6338)}])},593:function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0});let n=t(2648).Z,r=t(7294),a=n(t(9351));async function i(){let{userContext:e,setUserContext:s}=(0,r.useContext)(a.default);(0,r.useEffect)(()=>{e||fetch("/api/user",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{200==e.status&&s(e.user)})},[])}e.exports={handleContext:i}},6338:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return d}});var n=t(5893),r=t(7294),a=t(9351),i=function(e){let{userContext:s,setUserContext:t}=(0,r.useContext)(a.default),[i,c]=(0,r.useState)(new Date().toISOString().substring(0,10)),[o,l]=(0,r.useState)({exercise:"",sets:"",reps:"",weight:"",duration:""});function d(e){let{name:s,value:t}=e.target;var n=e.target.name;"date"===n?c(t):"exercise"===n?l(e=>({...e,[s]:t.replace(/[^a-zA-zäöüÄÖÜß]/,"")})):"sets"===n?l(e=>({...e,[s]:t.replace(/[^0-9]/,"")})):"reps"===n?l(e=>({...e,[s]:t.replace(/[^0-9]/,"")})):"weight"===n?l(e=>({...e,[s]:t.replace(/[^0-9,.]/,"")})):"duration"===n&&l(e=>({...e,[s]:t.replace(/[^0-9,.]/,"")}))}async function u(e){e.preventDefault(),await fetch(s.base_url+"/api/workouts",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({date:i+"T00:00:00.000Z",exercises:{exercise:o.exercise,sets:o.sets,reps:o.reps,weight:o.weight,duration:o.duration}})}).then(e=>e.json()).then(e=>{200==e.status?(t(e=>({...e,workouts:function(e){if(!e.find(e=>e.date===i+"T00:00:00.000Z"))return console.log("No date found, created a new one."),[...e,{date:i+"T00:00:00.000Z",exercises:[o]}];{console.log("Date found, added to the object.");let s=e.map(e=>e.date===i+"T00:00:00.000Z"?{...e,exercises:[...e.exercises,o]}:e);return s}}(s.workouts)})),l({exercise:"",sets:"",reps:"",weight:"",duration:""})):console.log("AddWorkout Else")}).catch()}return(0,n.jsx)("div",{children:(0,n.jsxs)("form",{className:"text-black flex flex-col md:flex-row w-[80%] mx-[10%]",action:"/api/workouts",method:"POST",children:[(0,n.jsx)("input",{onChange:d,className:"mt-2 rounded h-8 w-full",type:"date",name:"date",placeholder:"Date",value:i}),(0,n.jsx)("input",{onChange:d,className:"mt-2 rounded h-8 w-full",name:"exercise",placeholder:"\xdcbung",value:o.exercise}),(0,n.jsx)("input",{onChange:d,className:"mt-2 rounded h-8 w-full",name:"sets",placeholder:"Sets",value:o.sets}),(0,n.jsx)("input",{onChange:d,className:"mt-2 rounded h-8 w-full",name:"reps",placeholder:"Reps",value:o.reps}),(0,n.jsx)("input",{onChange:d,className:"mt-2 rounded h-8 w-full",name:"duration",placeholder:"Dauer in min",value:o.duration}),(0,n.jsx)("button",{onClick:u,className:"border-[1px] rounded mt-2 h-8 w-full bg-[#369623] mb-2",children:(0,n.jsx)("p",{className:"text-white",children:"Add"})})]})})},c=t(3343),o=function(e){let{userContext:s,setUserContext:t}=(0,r.useContext)(a.default);async function i(e,n){let{exercise:r}=e;await fetch("/api/workouts",{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({exercise:r,date:n})}).then(e=>e.json()).then(e=>{200===e.status&&t(e=>({...e,workouts:function(e,s,t){let n=e.map(e=>{if(e.date!==t)return e;{let n=e.exercises.filter(e=>e.exercise!==s.exercise|e.sets!==s.sets|e.reps!==s.reps|e.weight!==s.weight|e.duration!==s.duration);return{date:e.date,_id:e._id,exercises:n}}});return n}(s.workouts,r,n)}))}).catch(e=>console.error("Error:",e))}return(0,n.jsx)("div",{children:s&&s.workouts&&s.workouts.length>0?s.workouts.map((e,s)=>(0,n.jsxs)("div",{className:"",children:[e.exercises&&e.exercises.length>0?(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"gradient",children:e.date.slice(0,10)}),(0,n.jsxs)("div",{className:"flex justify-around",children:[(0,n.jsx)("p",{className:"basis-0 grow",children:"\xdcbung"}),(0,n.jsx)("p",{className:"basis-0 grow whitespace-nowrap",children:"Sets x Reps"}),(0,n.jsx)("p",{className:"basis-0 grow",children:"L\xe4nge"}),(0,n.jsx)("div",{className:"basis-0 grow-[0.5]",children:(0,n.jsx)("p",{children:"Delete"})})]}),(0,n.jsx)("hr",{})]}):"",e.exercises&&e.exercises.length>0?e.exercises.map((s,t)=>(0,n.jsxs)("div",{className:"flex justify-around",children:[(0,n.jsx)("p",{className:"basis-0 grow min-w-0",children:s.exercise}),(0,n.jsx)("p",{className:"basis-0 grow",children:s.sets|s.reps?s.sets+(s.reps?" x "+s.reps:""):""}),(0,n.jsx)("p",{className:"basis-0 grow",children:s.duration?s.duration+" min":""}),(0,n.jsx)("div",{className:"basis-0 grow-[0.5] flex justify-center",children:(0,n.jsx)("div",{onClick:()=>i({exercise:s},e.date),className:"bg-[#BA1000] w-min hover:cursor-pointer",children:(0,n.jsx)(c.Z,{})})})]},t)):""]},s)).reverse():""})},l=t(593),d=function(){return(0,l.handleContext)(),(0,n.jsxs)("div",{className:"min-h-screen",children:[(0,n.jsx)(i,{}),(0,n.jsx)(o,{})]})}}},function(e){e.O(0,[343,774,888,179],function(){return e(e.s=8474)}),_N_E=e.O()}]);